---
title: 'Infer Schema'
---

Automatically generate enrichment configuration from your data. Upload a file or provide sample items, and Rastro will analyze them to suggest:

- **Schema** - All fields in your data with types
- **Web enrichment fields** - Fields to add via web research
- **Taxonomy** - Category hierarchy for classification
- **Quality prompt** - Criteria for scoring data quality

## From File

Upload a CSV or Excel file to analyze:

```bash
curl -X POST "https://catalogapi.rastro.ai/api/public/infer-schema" \
  -H "Authorization: Bearer rastro_pk_..." \
  -F "file=@products.csv" \
  -F "prompt=Product catalog for electronics retailer" \
  -F "generate_taxonomy=true"
```

**Response:**

```json
{
  "file_name": "products.csv",
  "total_rows": 500,
  "sample_rows_used": 20,
  "suggested_schema": {
    "type": "object",
    "properties": {
      "name": {
        "type": "string",
        "description": "Product name",
        "x-field-category": "input"
      },
      "sku": {
        "type": "string",
        "description": "Stock keeping unit",
        "x-field-category": "input"
      },
      "specifications": {
        "type": "string",
        "description": "Technical specifications from manufacturer",
        "x-field-category": "enriched"
      }
    }
  },
  "web_enrichment_fields": [
    {"name": "specifications", "type": "string", "description": "Technical specifications from manufacturer"},
    {"name": "msrp", "type": "string", "description": "Manufacturer suggested retail price"},
    {"name": "reviews_summary", "type": "string", "description": "Summary of customer reviews"}
  ],
  "suggested_taxonomy": {
    "name": "Electronics",
    "hierarchy_levels": ["Category", "Subcategory", "Type"],
    "nodes": {
      "computers": {"name": "Computers", "parent": null, "attributes": []},
      "laptops": {"name": "Laptops", "parent": "computers", "attributes": []},
      "phones": {"name": "Phones", "parent": null, "attributes": []}
    }
  },
  "suggested_quality_prompt": "Evaluate if this product has complete specifications for e-commerce. Check for price, description, images, and technical specs. Score 5 for excellent, 1 for poor."
}
```

### Parameters

| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| `file` | file | Yes | - | CSV or Excel file to analyze |
| `prompt` | string | Yes | - | Description of your data (e.g., "Product catalog for electronics") |
| `generate_taxonomy` | boolean | No | `false` | If true, also generate a suggested taxonomy |
| `max_sample_rows` | integer | No | `20` | Maximum rows to sample for analysis |

### Using the Results

The response is designed to feed directly into `/public/enrich`:

```python
import requests

# Step 1: Infer schema from your file
infer_response = requests.post(
    "https://catalogapi.rastro.ai/api/public/infer-schema",
    headers={"Authorization": "Bearer rastro_pk_..."},
    files={"file": open("products.csv", "rb")},
    data={
        "prompt": "Product catalog for electronics",
        "generate_taxonomy": "true"
    }
)
config = infer_response.json()

# Step 2: Use the suggested config for enrichment
enrich_response = requests.post(
    "https://catalogapi.rastro.ai/api/public/enrich",
    headers={
        "Authorization": "Bearer rastro_pk_...",
        "Content-Type": "application/json"
    },
    json={
        "prompt": "Find product specifications and pricing",
        "items": your_items,
        "output_schema": config["web_enrichment_fields"],
        "taxonomy": config["suggested_taxonomy"],
        "predict_taxonomy": True,
        "quality_prompt": config["suggested_quality_prompt"]
    }
)
```

---

## From Sample Items

Analyze sample JSON items directly (no file upload):

```bash
curl -X POST "https://catalogapi.rastro.ai/api/public/infer-enrichment" \
  -H "Authorization: Bearer rastro_pk_..." \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Audio products catalog - headphones and earbuds",
    "items": [
      {"name": "Sony WH-1000XM5", "sku": "WH1000XM5-B", "price": "$399.99"},
      {"name": "Apple AirPods Pro 2", "sku": "AIRPODS-PRO-2", "price": "$249.00"},
      {"name": "Bose QC45", "sku": "QC45-BLK", "price": "$329.00"}
    ]
  }'
```

**Response:**

```json
{
  "suggested_schema": {
    "type": "object",
    "properties": {
      "name": {"type": "string", "description": "Product name", "x-field-category": "input"},
      "sku": {"type": "string", "description": "Stock keeping unit", "x-field-category": "input"},
      "price": {"type": "string", "description": "Price", "x-field-category": "input"},
      "noise_cancellation": {"type": "boolean", "description": "Has active noise cancellation", "x-field-category": "enriched"},
      "battery_life": {"type": "string", "description": "Battery life in hours", "x-field-category": "enriched"}
    }
  },
  "suggested_taxonomy": {
    "name": "Audio Products",
    "hierarchy_levels": ["Category", "Type"],
    "nodes": {
      "headphones": {"name": "Headphones", "parent": null, "attributes": []},
      "over_ear": {"name": "Over-Ear", "parent": "headphones", "attributes": []},
      "on_ear": {"name": "On-Ear", "parent": "headphones", "attributes": []},
      "earbuds": {"name": "Earbuds", "parent": null, "attributes": []},
      "true_wireless": {"name": "True Wireless", "parent": "earbuds", "attributes": []}
    }
  },
  "web_enrichment_fields": [
    {"name": "noise_cancellation", "type": "boolean", "description": "Has active noise cancellation"},
    {"name": "battery_life", "type": "string", "description": "Battery life in hours"},
    {"name": "driver_size", "type": "string", "description": "Driver size in mm"},
    {"name": "weight", "type": "string", "description": "Product weight"}
  ]
}
```

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `prompt` | string | Yes | Description of your data |
| `items` | array | Yes | Sample items to analyze (5-20 recommended) |

---

## Field Categories

The `x-field-category` in the schema indicates:

- **`input`** - Fields that exist in your original data
- **`enriched`** - Fields suggested to add via web enrichment

Use this to understand which fields are already present vs. which could be added through enrichment.

<Tip>
**Pro tip:** Start with `infer-schema` to understand your data, then use the `web_enrichment_fields` as the `output_schema` for `/public/enrich`.
</Tip>
